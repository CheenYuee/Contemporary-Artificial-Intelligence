<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>C:\Users\16977\Desktop\10195501438_陈越_实验二\C++项目文件\A_star(1)\main.cpp</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="Code::Blocks Exporter plugin" />
<style type="text/css">
<!--
body { color: #000000; background-color: #FFFFFF; }
.style11 { color: #000000; background-color: #FFFFFF; }
.style64 { color: #C8C8C8; }
.style72 { color: #C8C8C8; }
.style75 { color: #C8C8C8; }
.style1 { color: #A0A0A0; }
.style23 { color: #A0A0A0; }
.style65 { color: #A0A0A0; }
.style87 { color: #A0A0A0; }
.style2 { color: #BEBEE6; }
.style66 { color: #BEBEE6; }
.style3 { color: #8080FF; font-weight: bold; }
.style24 { color: #8080FF; font-weight: bold; }
.style67 { color: #8080FF; font-weight: bold; }
.style88 { color: #8080FF; font-weight: bold; }
.style15 { color: #8080FF; font-weight: bold; }
.style79 { color: #8080FF; font-weight: bold; }
.style17 { color: #008080; }
.style81 { color: #008080; }
.style18 { color: #800000; }
.style82 { color: #800000; }
.style4 { color: #F000F0; }
.style68 { color: #F0C8F0; }
.style5 { color: #0000A0; font-weight: bold; }
.style69 { color: #8787C8; font-weight: bold; }
.style16 { color: #00A000; font-weight: bold; }
.style80 { color: #9AC89A; font-weight: bold; }
.style19 { color: #BE00BE; font-weight: bold; }
.style83 { color: #BE89BE; font-weight: bold; }
.style6 { color: #0000FF; }
.style12 { color: #0000FF; }
.style20 { color: #0000FF; }
.style70 { color: #BEBEFF; }
.style76 { color: #BEBEFF; }
.style7 { color: #E0A000; }
.style71 { color: #E0CE9F; }
.style8 { color: #000000; }
.style9 { color: #00A000; }
.style73 { color: #84A084; }
.style10 { color: #FF0000; }
.style74 { color: #FFC8C8; }
.style34 { color: #000000; background-color: #80FFFF; font-weight: bold; }
.style35 { color: #FFFFFF; background-color: #FF0000; font-weight: bold; }
.style50 { color: #404080; font-style: italic; }
.style114 { color: #8585AC; font-style: italic; }
--></style></head>
<body>
<pre>
<code><span style="font: 10pt Courier New;"><span class="body">  1 </span><span class="style9">#include &lt;iostream&gt;</span>
<span class="body">  2  </span><span class="style9">#include &lt;queue&gt;</span>
<span class="body">  3  </span><span class="style9">#include &lt;vector&gt;</span>
<span class="body">  4  </span><span class="style9">#include &lt;map&gt;</span>
<span class="body">  5  </span><span class="style9">#include &lt;cmath&gt;</span>
<span class="body">  6  </span><span class="style5">using namespace </span><span class="style16">std</span><span class="style10">;</span>
<span class="body">  7  </span>
<span class="body">  8  </span><span class="style16">string </span><span class="style11">state_goal_str </span><span class="style10">= </span><span class="style6">"123804765"</span><span class="style10">;</span>
<span class="body">  9  </span><span class="style5">char </span><span class="style11">state_goal_matrix</span><span class="style10">[</span><span class="style4">3</span><span class="style10">][</span><span class="style4">3</span><span class="style10">] = {{</span><span class="style7">'1'</span><span class="style10">, </span><span class="style7">'2'</span><span class="style10">, </span><span class="style7">'3'</span><span class="style10">},</span>
<span class="body"> 10                          </span><span class="style10">{</span><span class="style7">'8'</span><span class="style10">, </span><span class="style7">'0'</span><span class="style10">, </span><span class="style7">'4'</span><span class="style10">},</span>
<span class="body"> 11                          </span><span class="style10">{</span><span class="style7">'7'</span><span class="style10">, </span><span class="style7">'6'</span><span class="style10">, </span><span class="style7">'5'</span><span class="style10">}};</span>
<span class="body"> 12  </span>
<span class="body"> 13  </span><span class="style16">string </span><span class="style11">state_input_str0 </span><span class="style10">= </span><span class="style6">"283104765"</span><span class="style10">;</span>
<span class="body"> 14  </span>
<span class="body"> 15  </span><span class="style2">// 这里定义了5个测试用例</span>
<span class="body"> 16  </span><span class="style16">string </span><span class="style11">state_input_str1 </span><span class="style10">= </span><span class="style6">"024657318"</span><span class="style10">;</span>
<span class="body"> 17  </span><span class="style16">string </span><span class="style11">state_input_str2 </span><span class="style10">= </span><span class="style6">"587346120"</span><span class="style10">;</span>
<span class="body"> 18  </span><span class="style16">string </span><span class="style11">state_input_str3 </span><span class="style10">= </span><span class="style6">"375148206"</span><span class="style10">;</span>
<span class="body"> 19  </span><span class="style16">string </span><span class="style11">state_input_str4 </span><span class="style10">= </span><span class="style6">"512768340"</span><span class="style10">;</span>
<span class="body"> 20  </span><span class="style16">string </span><span class="style11">state_input_str5 </span><span class="style10">= </span><span class="style6">"123804765"</span><span class="style10">;</span>
<span class="body"> 21  </span>
<span class="body"> 22  </span><span class="style2">// 状态类</span>
<span class="body"> 23  </span><span class="style5">class </span><span class="style11">State_Info</span>
<span class="body"> 24  </span><span class="style10">{</span>
<span class="body"> 25  </span><span class="style5">public</span><span class="style10">:</span>
<span class="body"> 26      </span><span class="style16">string </span><span class="style11">state_str</span><span class="style10">;</span>
<span class="body"> 27      </span><span class="style5">int </span><span class="style11">cost_g</span><span class="style10">;</span>
<span class="body"> 28      </span><span class="style5">int </span><span class="style11">cost_h</span><span class="style10">;</span>
<span class="body"> 29      </span><span class="style5">int </span><span class="style11">cost_f</span><span class="style10">;</span>
<span class="body"> 30      </span><span class="style5">int </span><span class="style11">zero_i</span><span class="style10">;</span>
<span class="body"> 31      </span><span class="style5">int </span><span class="style11">zero_j</span><span class="style10">;</span>
<span class="body"> 32      </span><span class="style5">char </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style4">3</span><span class="style10">][</span><span class="style4">3</span><span class="style10">];</span>
<span class="body"> 33  </span>
<span class="body"> 34      </span><span class="style11">State_Info</span><span class="style10">(</span><span class="style16">string </span><span class="style11">input_str</span><span class="style10">, </span><span class="style5">int </span><span class="style11">g</span><span class="style10">)</span>
<span class="body"> 35      </span><span class="style10">{</span>
<span class="body"> 36  </span>
<span class="body"> 37          </span><span class="style5">int </span><span class="style11">index </span><span class="style10">= </span><span class="style4">0</span><span class="style10">;</span>
<span class="body"> 38          </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span class="style4">3</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)</span>
<span class="body"> 39          </span><span class="style10">{</span>
<span class="body"> 40              </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">j </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">j </span><span class="style10">&lt; </span><span class="style4">3</span><span class="style10">; </span><span class="style11">j</span><span class="style10">++)</span>
<span class="body"> 41              </span><span class="style10">{</span>
<span class="body"> 42                  </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">i</span><span class="style10">][</span><span class="style11">j</span><span class="style10">] = </span><span class="style11">input_str</span><span class="style10">[</span><span class="style11">index</span><span class="style10">];</span>
<span class="body"> 43                  </span><span class="style11">index</span><span class="style10">++;</span>
<span class="body"> 44                  </span><span class="style5">if</span><span class="style10">(</span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">i</span><span class="style10">][</span><span class="style11">j</span><span class="style10">] == </span><span class="style7">'0'</span><span class="style10">)</span>
<span class="body"> 45                  </span><span class="style10">{</span>
<span class="body"> 46                      </span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">zero_i </span><span class="style10">= </span><span class="style11">i</span><span class="style10">;</span>
<span class="body"> 47                      </span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">zero_j </span><span class="style10">= </span><span class="style11">j</span><span class="style10">;</span>
<span class="body"> 48                  </span><span class="style10">}</span>
<span class="body"> 49              </span><span class="style10">}</span>
<span class="body"> 50          </span><span class="style10">}</span>
<span class="body"> 51          </span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">state_str </span><span class="style10">= </span><span class="style11">input_str</span><span class="style10">;</span>
<span class="body"> 52          </span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">cost_g </span><span class="style10">= </span><span class="style11">g</span><span class="style10">;</span>
<span class="body"> 53          </span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">cost_h </span><span class="style10">= </span><span class="style11">compute_h</span><span class="style10">();</span>
<span class="body"> 54          </span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">cost_f </span><span class="style10">= </span><span class="style11">cost_g </span><span class="style10">+ </span><span class="style11">cost_h</span><span class="style10">;</span>
<span class="body"> 55  </span>
<span class="body"> 56      </span><span class="style10">}</span>
<span class="body"> 57  </span><span class="style1">/*</span>
<span class="body"> 58      </span><span class="style1">// 另一种没有采用的启发式函数</span>
<span class="body"> 59      </span><span class="style1">int compute_h2(void)</span>
<span class="body"> 60      </span><span class="style1">{</span>
<span class="body"> 61  </span>
<span class="body"> 62          </span><span class="style1">int h = 0;</span>
<span class="body"> 63  </span>
<span class="body"> 64          </span><span class="style1">for(unsigned i = 0; i &lt; state_goal_str.size(); i++)</span>
<span class="body"> 65          </span><span class="style1">{</span>
<span class="body"> 66              </span><span class="style1">if(state_str[i] == '0')</span>
<span class="body"> 67              </span><span class="style1">{</span>
<span class="body"> 68                  </span><span class="style1">continue;</span>
<span class="body"> 69              </span><span class="style1">}</span>
<span class="body"> 70              </span><span class="style1">if(state_str[i] != state_goal_str[i])</span>
<span class="body"> 71              </span><span class="style1">{</span>
<span class="body"> 72                  </span><span class="style1">h++;</span>
<span class="body"> 73              </span><span class="style1">}</span>
<span class="body"> 74          </span><span class="style1">}</span>
<span class="body"> 75          </span><span class="style1">return h;</span>
<span class="body"> 76      </span><span class="style1">}</span>
<span class="body"> 77  </span><span class="style1">*/</span>
<span class="body"> 78      </span><span class="style2">// 启发式函数h</span>
<span class="body"> 79      </span><span class="style5">int </span><span class="style11">compute_h</span><span class="style10">(</span><span class="style5">void</span><span class="style10">)</span>
<span class="body"> 80      </span><span class="style10">{</span>
<span class="body"> 81          </span><span class="style5">int </span><span class="style11">h </span><span class="style10">= </span><span class="style4">0</span><span class="style10">;</span>
<span class="body"> 82          </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">number </span><span class="style10">= </span><span class="style4">1</span><span class="style10">; </span><span class="style11">number </span><span class="style10">&lt;= </span><span class="style4">8</span><span class="style10">; </span><span class="style11">number</span><span class="style10">++)</span>
<span class="body"> 83          </span><span class="style10">{</span>
<span class="body"> 84              </span><span class="style5">int </span><span class="style11">this_i</span><span class="style10">, </span><span class="style11">this_j</span><span class="style10">;</span>
<span class="body"> 85              </span><span class="style5">int </span><span class="style11">goal_i</span><span class="style10">, </span><span class="style11">goal_j</span><span class="style10">;</span>
<span class="body"> 86              </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span class="style4">3</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)</span>
<span class="body"> 87              </span><span class="style10">{</span>
<span class="body"> 88                  </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">j </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">j </span><span class="style10">&lt; </span><span class="style4">3</span><span class="style10">; </span><span class="style11">j</span><span class="style10">++)</span>
<span class="body"> 89                  </span><span class="style10">{</span>
<span class="body"> 90                      </span><span class="style5">if</span><span class="style10">(</span><span class="style11">state_goal_matrix</span><span class="style10">[</span><span class="style11">i</span><span class="style10">][</span><span class="style11">j</span><span class="style10">] == </span><span class="style7">'0' </span><span class="style10">+ </span><span class="style11">number</span><span class="style10">)</span>
<span class="body"> 91                      </span><span class="style10">{</span>
<span class="body"> 92                          </span><span class="style11">goal_i </span><span class="style10">= </span><span class="style11">i</span><span class="style10">;</span>
<span class="body"> 93                          </span><span class="style11">goal_j </span><span class="style10">= </span><span class="style11">j</span><span class="style10">;</span>
<span class="body"> 94                      </span><span class="style10">}</span>
<span class="body"> 95                      </span><span class="style5">if</span><span class="style10">(</span><span class="style5">this</span><span class="style10">-&gt;</span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">i</span><span class="style10">][</span><span class="style11">j</span><span class="style10">] == </span><span class="style7">'0' </span><span class="style10">+ </span><span class="style11">number</span><span class="style10">)</span>
<span class="body"> 96                      </span><span class="style10">{</span>
<span class="body"> 97                          </span><span class="style11">this_i </span><span class="style10">= </span><span class="style11">i</span><span class="style10">;</span>
<span class="body"> 98                          </span><span class="style11">this_j </span><span class="style10">= </span><span class="style11">j</span><span class="style10">;</span>
<span class="body"> 99                      </span><span class="style10">}</span>
<span class="body">100                  </span><span class="style10">}</span>
<span class="body">101              </span><span class="style10">}</span>
<span class="body">102              </span><span class="style11">h </span><span class="style10">+= </span><span class="style11">abs</span><span class="style10">(</span><span class="style11">this_i </span><span class="style10">- </span><span class="style11">goal_i</span><span class="style10">) + </span><span class="style11">abs</span><span class="style10">(</span><span class="style11">this_j </span><span class="style10">- </span><span class="style11">goal_j</span><span class="style10">);</span>
<span class="body">103          </span><span class="style10">}</span>
<span class="body">104          </span><span class="style5">return </span><span class="style11">h</span><span class="style10">;</span>
<span class="body">105      </span><span class="style10">}</span>
<span class="body">106      </span><span class="style2">// 将状态矩阵转换成字符串</span>
<span class="body">107      </span><span class="style16">string </span><span class="style11">generate_string</span><span class="style10">(</span><span class="style5">char </span><span class="style11">matrix</span><span class="style10">[</span><span class="style4">3</span><span class="style10">][</span><span class="style4">3</span><span class="style10">])</span>
<span class="body">108      </span><span class="style10">{</span>
<span class="body">109          </span><span class="style16">string </span><span class="style11">s</span><span class="style10">;</span>
<span class="body">110          </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span class="style4">3</span><span class="style10">; </span><span class="style11">i</span><span class="style10">++)</span>
<span class="body">111          </span><span class="style10">{</span>
<span class="body">112              </span><span class="style5">for</span><span class="style10">(</span><span class="style5">int </span><span class="style11">j </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">j </span><span class="style10">&lt; </span><span class="style4">3</span><span class="style10">; </span><span class="style11">j</span><span class="style10">++)</span>
<span class="body">113              </span><span class="style10">{</span>
<span class="body">114                  </span><span class="style11">s</span><span class="style10">.</span><span class="style16">push_back</span><span class="style10">(</span><span class="style11">matrix</span><span class="style10">[</span><span class="style11">i</span><span class="style10">][</span><span class="style11">j</span><span class="style10">]);</span>
<span class="body">115              </span><span class="style10">}</span>
<span class="body">116          </span><span class="style10">}</span>
<span class="body">117          </span><span class="style5">return </span><span class="style11">s</span><span class="style10">;</span>
<span class="body">118      </span><span class="style10">}</span>
<span class="body">119      </span><span class="style2">// 生成下一步可到达的状态</span>
<span class="body">120      </span><span class="style16">vector</span><span class="style10">&lt;</span><span class="style16">string</span><span class="style10">&gt; </span><span class="style11">generate_next</span><span class="style10">(</span><span class="style5">void</span><span class="style10">)</span>
<span class="body">121      </span><span class="style10">{</span>
<span class="body">122          </span><span class="style16">vector</span><span class="style10">&lt;</span><span class="style16">string</span><span class="style10">&gt; </span><span class="style11">next</span><span class="style10">;</span>
<span class="body">123  </span>
<span class="body">124          </span><span class="style5">if</span><span class="style10">(</span><span class="style11">zero_j </span><span class="style10">&gt; </span><span class="style4">0</span><span class="style10">)</span>
<span class="body">125          </span><span class="style10">{</span>
<span class="body">126              </span><span class="style2">// 左移</span>
<span class="body">127              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j </span><span class="style10">- </span><span class="style4">1</span><span class="style10">];</span>
<span class="body">128              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j </span><span class="style10">- </span><span class="style4">1</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">129              </span><span class="style16">string </span><span class="style11">s </span><span class="style10">= </span><span class="style11">generate_string</span><span class="style10">(</span><span class="style11">state_matrix</span><span class="style10">);</span>
<span class="body">130              </span><span class="style11">next</span><span class="style10">.</span><span class="style16">push_back</span><span class="style10">(</span><span class="style11">s</span><span class="style10">);</span>
<span class="body">131              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j </span><span class="style10">- </span><span class="style4">1</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">];</span>
<span class="body">132              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">133          </span><span class="style10">}</span>
<span class="body">134          </span><span class="style5">if</span><span class="style10">(</span><span class="style11">zero_j </span><span class="style10">&lt; </span><span class="style4">2</span><span class="style10">)</span>
<span class="body">135          </span><span class="style10">{</span>
<span class="body">136              </span><span class="style2">// 右移</span>
<span class="body">137              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">];</span>
<span class="body">138              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">139              </span><span class="style16">string </span><span class="style11">s </span><span class="style10">= </span><span class="style11">generate_string</span><span class="style10">(</span><span class="style11">state_matrix</span><span class="style10">);</span>
<span class="body">140              </span><span class="style11">next</span><span class="style10">.</span><span class="style16">push_back</span><span class="style10">(</span><span class="style11">s</span><span class="style10">);</span>
<span class="body">141              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">];</span>
<span class="body">142              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">143          </span><span class="style10">}</span>
<span class="body">144          </span><span class="style5">if</span><span class="style10">(</span><span class="style11">zero_i </span><span class="style10">&gt; </span><span class="style4">0</span><span class="style10">)</span>
<span class="body">145          </span><span class="style10">{</span>
<span class="body">146              </span><span class="style2">// 上移</span>
<span class="body">147              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i </span><span class="style10">- </span><span class="style4">1</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">];</span>
<span class="body">148              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i </span><span class="style10">- </span><span class="style4">1</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">149              </span><span class="style16">string </span><span class="style11">s </span><span class="style10">= </span><span class="style11">generate_string</span><span class="style10">(</span><span class="style11">state_matrix</span><span class="style10">);</span>
<span class="body">150              </span><span class="style11">next</span><span class="style10">.</span><span class="style16">push_back</span><span class="style10">(</span><span class="style11">s</span><span class="style10">);</span>
<span class="body">151              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i </span><span class="style10">- </span><span class="style4">1</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">];</span>
<span class="body">152              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">153          </span><span class="style10">}</span>
<span class="body">154          </span><span class="style5">if</span><span class="style10">(</span><span class="style11">zero_i </span><span class="style10">&lt; </span><span class="style4">2</span><span class="style10">)</span>
<span class="body">155          </span><span class="style10">{</span>
<span class="body">156              </span><span class="style2">// 下移</span>
<span class="body">157              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">];</span>
<span class="body">158              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">159              </span><span class="style16">string </span><span class="style11">s </span><span class="style10">= </span><span class="style11">generate_string</span><span class="style10">(</span><span class="style11">state_matrix</span><span class="style10">);</span>
<span class="body">160              </span><span class="style11">next</span><span class="style10">.</span><span class="style16">push_back</span><span class="style10">(</span><span class="style11">s</span><span class="style10">);</span>
<span class="body">161              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">];</span>
<span class="body">162              </span><span class="style11">state_matrix</span><span class="style10">[</span><span class="style11">zero_i</span><span class="style10">][</span><span class="style11">zero_j</span><span class="style10">] = </span><span class="style7">'0'</span><span class="style10">;</span>
<span class="body">163          </span><span class="style10">}</span>
<span class="body">164          </span><span class="style5">return  </span><span class="style11">next</span><span class="style10">;</span>
<span class="body">165      </span><span class="style10">}</span>
<span class="body">166  </span>
<span class="body">167  </span><span class="style10">};</span>
<span class="body">168  </span>
<span class="body">169  </span><span class="style5">void </span><span class="style11">A_star_algorithm</span><span class="style10">(</span><span class="style16">string </span><span class="style11">state_input_str</span><span class="style10">)</span>
<span class="body">170  </span><span class="style10">{</span>
<span class="body">171      </span><span class="style16">priority_queue </span><span class="style10">&lt;</span><span class="style16">pair</span><span class="style10">&lt;</span><span class="style5">int</span><span class="style10">, </span><span class="style11">State_Info</span><span class="style10">*&gt;, </span><span class="style16">vector</span><span class="style10">&lt;</span><span class="style16">pair</span><span class="style10">&lt;</span><span class="style5">int</span><span class="style10">, </span><span class="style11">State_Info</span><span class="style10">*&gt; &gt;, </span><span class="style16">greater</span><span class="style10">&lt;</span><span class="style16">pair</span><span class="style10">&lt;</span><span class="style5">int</span><span class="style10">, </span><span class="style11">State_Info</span><span class="style10">*&gt; &gt; &gt; </span><span class="style11">q</span><span class="style10">;</span>
<span class="body">172      </span><span class="style11">State_Info</span><span class="style10">* </span><span class="style11">state </span><span class="style10">= </span><span class="style5">new </span><span class="style11">State_Info</span><span class="style10">(</span><span class="style11">state_input_str</span><span class="style10">, </span><span class="style4">0</span><span class="style10">);</span>
<span class="body">173      </span><span class="style11">q</span><span class="style10">.</span><span class="style11">push</span><span class="style10">(</span><span class="style11">make_pair</span><span class="style10">(</span><span class="style11">state</span><span class="style10">-&gt;</span><span class="style11">cost_f</span><span class="style10">, </span><span class="style11">state</span><span class="style10">));</span>
<span class="body">174  </span>
<span class="body">175      </span><span class="style11">State_Info</span><span class="style10">* </span><span class="style11">tmp </span><span class="style10">= </span><span class="style11">q</span><span class="style10">.</span><span class="style11">top</span><span class="style10">().</span><span class="style11">second</span><span class="style10">;</span>
<span class="body">176      </span><span class="style16">map</span><span class="style10">&lt;</span><span class="style16">string</span><span class="style10">, </span><span class="style5">int</span><span class="style10">&gt; </span><span class="style11">visited</span><span class="style10">;</span>
<span class="body">177      </span><span class="style5">int </span><span class="style11">n </span><span class="style10">= </span><span class="style4">0</span><span class="style10">;</span>
<span class="body">178      </span><span class="style5">while</span><span class="style10">(</span><span class="style11">q</span><span class="style10">.</span><span class="style16">size</span><span class="style10">() &amp;&amp; </span><span class="style11">tmp</span><span class="style10">-&gt;</span><span class="style11">state_str </span><span class="style10">!= </span><span class="style11">state_goal_str</span><span class="style10">)</span>
<span class="body">179      </span><span class="style10">{</span>
<span class="body">180          </span><span class="style11">n</span><span class="style10">++;</span>
<span class="body">181          </span><span class="style11">q</span><span class="style10">.</span><span class="style11">pop</span><span class="style10">();</span>
<span class="body">182          </span><span class="style11">visited</span><span class="style10">[</span><span class="style11">tmp</span><span class="style10">-&gt;</span><span class="style11">state_str</span><span class="style10">] = </span><span class="style4">1</span><span class="style10">;</span>
<span class="body">183          </span><span class="style16">vector</span><span class="style10">&lt;</span><span class="style16">string</span><span class="style10">&gt; </span><span class="style11">next </span><span class="style10">= </span><span class="style11">tmp</span><span class="style10">-&gt;</span><span class="style11">generate_next</span><span class="style10">();</span>
<span class="body">184          </span><span class="style5">for</span><span class="style10">(</span><span class="style5">unsigned </span><span class="style11">i </span><span class="style10">= </span><span class="style4">0</span><span class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span class="style11">next</span><span class="style10">.</span><span class="style16">size</span><span class="style10">(); </span><span class="style11">i</span><span class="style10">++)</span>
<span class="body">185          </span><span class="style10">{</span>
<span class="body">186              </span><span class="style5">if</span><span class="style10">(</span><span class="style11">visited</span><span class="style10">.</span><span class="style16">count</span><span class="style10">(</span><span class="style11">next</span><span class="style10">[</span><span class="style11">i</span><span class="style10">]) == </span><span class="style4">1</span><span class="style10">)  </span><span class="style5">continue</span><span class="style10">;</span>
<span class="body">187              </span><span class="style11">State_Info</span><span class="style10">* </span><span class="style11">state_next </span><span class="style10">= </span><span class="style5">new </span><span class="style11">State_Info</span><span class="style10">(</span><span class="style11">next</span><span class="style10">[</span><span class="style11">i</span><span class="style10">], </span><span class="style11">tmp</span><span class="style10">-&gt;</span><span class="style11">cost_g </span><span class="style10">+ </span><span class="style4">1</span><span class="style10">);</span>
<span class="body">188              </span><span class="style11">q</span><span class="style10">.</span><span class="style11">push</span><span class="style10">(</span><span class="style11">make_pair</span><span class="style10">(</span><span class="style11">state_next</span><span class="style10">-&gt;</span><span class="style11">cost_f</span><span class="style10">, </span><span class="style11">state_next</span><span class="style10">));</span>
<span class="body">189          </span><span class="style10">}</span>
<span class="body">190          </span><span class="style11">tmp </span><span class="style10">= </span><span class="style11">q</span><span class="style10">.</span><span class="style11">top</span><span class="style10">().</span><span class="style11">second</span><span class="style10">;</span>
<span class="body">191      </span><span class="style10">}</span>
<span class="body">192      </span><span class="style5">if</span><span class="style10">(</span><span class="style11">q</span><span class="style10">.</span><span class="style16">size</span><span class="style10">() == </span><span class="style4">0</span><span class="style10">)</span>
<span class="body">193      </span><span class="style10">{</span>
<span class="body">194          </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"Don't find the state." </span><span class="style10">&lt;&lt; </span><span class="style16">endl</span><span class="style10">;</span>
<span class="body">195      </span><span class="style10">}</span><span class="style5">else</span><span class="style10">{</span>
<span class="body">196          </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"Find the state." </span><span class="style10">&lt;&lt; </span><span class="style16">endl</span><span class="style10">;</span>
<span class="body">197          </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"cost:  "</span><span class="style10">;</span>
<span class="body">198          </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style11">tmp</span><span class="style10">-&gt;</span><span class="style11">cost_g </span><span class="style10">&lt;&lt; </span><span class="style16">endl</span><span class="style10">;</span>
<span class="body">199          </span><span class="style2">//cout &lt;&lt; tmp-&gt;state_str &lt;&lt; endl;</span>
<span class="body">200          </span><span class="style2">//cout &lt;&lt; n &lt;&lt; endl;</span>
<span class="body">201      </span><span class="style10">}</span>
<span class="body">202  </span><span class="style10">}</span>
<span class="body">203  </span>
<span class="body">204  </span><span class="style5">int </span><span class="style11">main</span><span class="style10">()</span>
<span class="body">205  </span><span class="style10">{</span>
<span class="body">206      </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"test input 1:  "</span><span class="style10">;</span>
<span class="body">207      </span><span class="style11">A_star_algorithm</span><span class="style10">(</span><span class="style11">state_input_str1</span><span class="style10">);</span>
<span class="body">208      </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"test input 2:  "</span><span class="style10">;</span>
<span class="body">209      </span><span class="style11">A_star_algorithm</span><span class="style10">(</span><span class="style11">state_input_str2</span><span class="style10">);</span>
<span class="body">210      </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"test input 3:  "</span><span class="style10">;</span>
<span class="body">211      </span><span class="style11">A_star_algorithm</span><span class="style10">(</span><span class="style11">state_input_str3</span><span class="style10">);</span>
<span class="body">212      </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"test input 4:  "</span><span class="style10">;</span>
<span class="body">213      </span><span class="style11">A_star_algorithm</span><span class="style10">(</span><span class="style11">state_input_str4</span><span class="style10">);</span>
<span class="body">214      </span><span class="style16">cout </span><span class="style10">&lt;&lt; </span><span class="style6">"test input 5:  "</span><span class="style10">;</span>
<span class="body">215      </span><span class="style11">A_star_algorithm</span><span class="style10">(</span><span class="style11">state_input_str5</span><span class="style10">);</span>
<span class="body">216      </span><span class="style5">return </span><span class="style4">0</span><span class="style10">;</span>
<span class="body">217  </span><span class="style10">}</span></span>
</code></pre>
</body>
</html>
